<!doctype html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <title>Sticky å›¾ç‰‡ + æ»šåŠ¨æ–‡å­—ï¼ˆåŒå‘ï¼‰</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
        <style>
            body {
                margin: 0;
                font-family: sans-serif;
                background: #000;
                color: #fff;
            }
            .container {
                display: flex;
                margin-bottom: 200px;
            }
            .sticky-img {
                position: sticky;
                top: 0;
                height: 100vh;
                width: 60vw;
                background: #222;
            }
            .sticky-img img {
                width: 100%;
                height: 100%;
                object-fit: cover;
                transition: opacity 0.4s ease;
            }
            .text-panel {
                width: 40vw;
                padding: 200px 30px;
            }
            .text-panel p {
                margin-bottom: 60vh;
                font-size: 22px;
                line-height: 1.6;
            }
        </style>
    </head>
    <body>
        <!-- ç¬¬ä¸€ç»„ -->
        <div class="container">
            <div class="sticky-img">
                <img id="main-img1" src="https://picsum.photos/id/1005/1000/1000" />
            </div>
            <div class="text-panel" id="panel1">
                <p data-img="1005">ğŸŒ… åœ¨æµ·è¾¹è¿æ¥ç¬¬ä¸€ç¼•æ™¨å…‰ï¼Œæµ·é£å¸¦ç€å’¸å‘³å’Œæ¸©æš–çš„æ°”æ¯ã€‚</p>
                <p data-img="1011">ğŸ”ï¸ é«˜å±±ä¸Šçš„æ¸…æ™¨ï¼Œè–„é›¾ä¸­ä¼ æ¥é¸Ÿé¸£å’Œè¿œå¤„çš„æºªæ°´å£°ã€‚</p>
                <p data-img="1018">ğŸŒ¸ æ˜¥æ—¥çš„èŠ±æµ·ï¼Œç²‰è‰²çš„èŠ±ç“£åœ¨å¾®é£ä¸­è½»è½»æ‘‡æ›³ã€‚</p>
                <p data-img="1024">ğŸ™ï¸ åŸå¸‚çš„é»„æ˜ï¼Œè¡—ç¯ä¸è½æ—¥äº¤ç»‡æˆæ¸©æŸ”çš„è‰²å½©ã€‚</p>
            </div>
        </div>

        <!-- ç¬¬äºŒç»„ -->
        <div class="container">
            <div class="text-panel" id="panel2">
                <p data-img="1018">ğŸŒ¸ æ˜¥æ—¥çš„èŠ±æµ·ï¼Œç²‰è‰²çš„èŠ±ç“£åœ¨å¾®é£ä¸­è½»è½»æ‘‡æ›³ã€‚</p>
                <p data-img="1024">ğŸ™ï¸ åŸå¸‚çš„é»„æ˜ï¼Œè¡—ç¯ä¸è½æ—¥äº¤ç»‡æˆæ¸©æŸ”çš„è‰²å½©ã€‚</p>
                <p data-img="1032">ğŸŒ² æ£®æ—æ·±å¤„ï¼Œé˜³å…‰é€è¿‡æ ‘å¶ï¼Œæ´’åœ¨æŸ”è½¯çš„è‹”è—“ä¸Šã€‚</p>
                <p data-img="1041">ğŸŒŒ å¤œç©ºä¸‹çš„å®é™ï¼Œç¹æ˜Ÿç‚¹ç‚¹ï¼Œä»¿ä½›èƒ½å¬åˆ°å®‡å®™çš„å‘¼å¸ã€‚</p>
            </div>
            <div class="sticky-img">
                <img id="main-img2" src="https://picsum.photos/id/1018/1000/1000" />
            </div>
        </div>

        <script>
            gsap.registerPlugin(ScrollTrigger);

            const mainImg1 = document.getElementById("main-img1");
            const mainImg2 = document.getElementById("main-img2");

            const allImgIds = ["1005", "1011", "1018", "1024", "1032", "1041"];
            allImgIds.forEach((id) => {
                const img = new Image();
                img.src = `https://picsum.photos/id/${id}/1000/1000`; // é¢„åŠ è½½
            });

            function changeImage(imgElement, imgId) {
                imgElement.style.opacity = 0;
                setTimeout(() => {
                    imgElement.src = `https://picsum.photos/id/${imgId}/1000/1000`;
                    imgElement.style.opacity = 1;
                }, 300);
            }

            // ç¬¬ä¸€ç»„
            document.querySelectorAll("#panel1 p").forEach((p) => {
                ScrollTrigger.create({
                    trigger: p,
                    start: "top center",
                    onEnter: () => changeImage(mainImg1, p.dataset.img),
                    onEnterBack: () => changeImage(mainImg1, p.dataset.img),
                });
            });

            // ç¬¬äºŒç»„
            document.querySelectorAll("#panel2 p").forEach((p) => {
                ScrollTrigger.create({
                    trigger: p,
                    start: "top center",
                    onEnter: () => changeImage(mainImg2, p.dataset.img),
                    onEnterBack: () => changeImage(mainImg2, p.dataset.img),
                });
            });
        </script>
    </body>
</html>
